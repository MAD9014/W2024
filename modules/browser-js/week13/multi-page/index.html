<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>13.2 SPA and JAM Stack | MAD9014</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Cross-Platform Web Development">
    
    <link rel="preload" href="/W2024/assets/css/0.styles.45320be6.css" as="style"><link rel="preload" href="/W2024/assets/js/app.66be6d0a.js" as="script"><link rel="preload" href="/W2024/assets/js/2.2dde8ef8.js" as="script"><link rel="preload" href="/W2024/assets/js/1.5dccc02f.js" as="script"><link rel="preload" href="/W2024/assets/js/42.10b4b851.js" as="script"><link rel="preload" href="/W2024/assets/js/21.a0811bd6.js" as="script"><link rel="preload" href="/W2024/assets/js/23.6f106e0b.js" as="script"><link rel="prefetch" href="/W2024/assets/js/10.1a94ffdf.js"><link rel="prefetch" href="/W2024/assets/js/11.444a63bc.js"><link rel="prefetch" href="/W2024/assets/js/12.dfc01b57.js"><link rel="prefetch" href="/W2024/assets/js/13.dac8e333.js"><link rel="prefetch" href="/W2024/assets/js/14.4f6e8388.js"><link rel="prefetch" href="/W2024/assets/js/15.f5bf1111.js"><link rel="prefetch" href="/W2024/assets/js/16.6a92d24e.js"><link rel="prefetch" href="/W2024/assets/js/17.9e61cdfb.js"><link rel="prefetch" href="/W2024/assets/js/18.87da4873.js"><link rel="prefetch" href="/W2024/assets/js/19.1c58f94e.js"><link rel="prefetch" href="/W2024/assets/js/20.6c52a85d.js"><link rel="prefetch" href="/W2024/assets/js/22.46ecc00a.js"><link rel="prefetch" href="/W2024/assets/js/24.37afaa69.js"><link rel="prefetch" href="/W2024/assets/js/25.52cfe7fa.js"><link rel="prefetch" href="/W2024/assets/js/26.df771b4b.js"><link rel="prefetch" href="/W2024/assets/js/27.173d5de9.js"><link rel="prefetch" href="/W2024/assets/js/28.06e857bb.js"><link rel="prefetch" href="/W2024/assets/js/29.0834c8d2.js"><link rel="prefetch" href="/W2024/assets/js/3.3a3f47d0.js"><link rel="prefetch" href="/W2024/assets/js/30.3d8107be.js"><link rel="prefetch" href="/W2024/assets/js/31.d219f188.js"><link rel="prefetch" href="/W2024/assets/js/32.eca59acd.js"><link rel="prefetch" href="/W2024/assets/js/33.721adc44.js"><link rel="prefetch" href="/W2024/assets/js/34.ff0df110.js"><link rel="prefetch" href="/W2024/assets/js/35.7a0d58a0.js"><link rel="prefetch" href="/W2024/assets/js/36.4035590c.js"><link rel="prefetch" href="/W2024/assets/js/37.ade24e63.js"><link rel="prefetch" href="/W2024/assets/js/38.fdd2fbf1.js"><link rel="prefetch" href="/W2024/assets/js/39.0af27504.js"><link rel="prefetch" href="/W2024/assets/js/4.b85af2cd.js"><link rel="prefetch" href="/W2024/assets/js/40.bf654ac6.js"><link rel="prefetch" href="/W2024/assets/js/41.9fb7dc69.js"><link rel="prefetch" href="/W2024/assets/js/43.ddf9517f.js"><link rel="prefetch" href="/W2024/assets/js/44.c4cffa3b.js"><link rel="prefetch" href="/W2024/assets/js/45.2467b08e.js"><link rel="prefetch" href="/W2024/assets/js/46.59baae9f.js"><link rel="prefetch" href="/W2024/assets/js/47.aea6a80d.js"><link rel="prefetch" href="/W2024/assets/js/48.4f184429.js"><link rel="prefetch" href="/W2024/assets/js/49.ee4c566b.js"><link rel="prefetch" href="/W2024/assets/js/5.ea05b443.js"><link rel="prefetch" href="/W2024/assets/js/50.a416c609.js"><link rel="prefetch" href="/W2024/assets/js/51.970a1c48.js"><link rel="prefetch" href="/W2024/assets/js/52.fd423478.js"><link rel="prefetch" href="/W2024/assets/js/53.f304801c.js"><link rel="prefetch" href="/W2024/assets/js/54.65c615e2.js"><link rel="prefetch" href="/W2024/assets/js/55.0c7bdb4b.js"><link rel="prefetch" href="/W2024/assets/js/56.c09c6314.js"><link rel="prefetch" href="/W2024/assets/js/57.bd1f28af.js"><link rel="prefetch" href="/W2024/assets/js/58.1906c7ed.js"><link rel="prefetch" href="/W2024/assets/js/59.d527f78b.js"><link rel="prefetch" href="/W2024/assets/js/6.0f9407d8.js"><link rel="prefetch" href="/W2024/assets/js/60.73e7147c.js"><link rel="prefetch" href="/W2024/assets/js/61.18eecfc4.js"><link rel="prefetch" href="/W2024/assets/js/62.78b8aad3.js"><link rel="prefetch" href="/W2024/assets/js/63.8711c3d9.js"><link rel="prefetch" href="/W2024/assets/js/64.32bc00ab.js"><link rel="prefetch" href="/W2024/assets/js/7.58d95412.js"><link rel="prefetch" href="/W2024/assets/js/vendors~docsearch.9e606068.js">
    <link rel="stylesheet" href="/W2024/assets/css/0.styles.45320be6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/W2024/" class="home-link router-link-active"><img src="/W2024/mad-d-logo-sm.png" alt="MAD9014" class="logo"> <span class="site-name can-hide">MAD9014</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/W2024/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/W2024/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/W2024/conventions/" class="nav-link">
  Conventions
</a></div><div class="nav-item"><a href="/W2024/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/W2024/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/W2024/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/W2024/conventions/" class="nav-link">
  Conventions
</a></div><div class="nav-item"><a href="/W2024/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Core JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Browser JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/W2024/modules/browser-js/week5/dom-1/" class="sidebar-link">5.1: Document Object Model</a></li><li><a href="/W2024/modules/browser-js/week5/dom-2/" class="sidebar-link">5.2: Document Object Model</a></li><li><a href="/W2024/modules/browser-js/week6/events/" class="sidebar-link">6.1: Handling Events</a></li><li><a href="/W2024/modules/browser-js/week7/project-structure/" class="sidebar-link">7.1: Project Structure</a></li><li><a href="/W2024/modules/browser-js/week7/code-structure/" class="sidebar-link">7.2: Code Structure</a></li><li><a href="/W2024/modules/browser-js/week9/promises/" class="sidebar-link">9.1: Promises</a></li><li><a href="/W2024/modules/browser-js/week9/async/" class="sidebar-link">9.2: Asynchronous Programming</a></li><li><a href="/W2024/modules/browser-js/week10/ajax/" class="sidebar-link">10.1: AJAX and Fetch</a></li><li><a href="/W2024/modules/browser-js/week10/fetch-apis/" class="sidebar-link">10.2: Fetch and APIs</a></li><li><a href="/W2024/modules/browser-js/week11/fetch-data/" class="sidebar-link">11.1: Dynamic Data</a></li><li><a href="/W2024/modules/browser-js/week11/security/" class="sidebar-link">11.2: Fetch Security</a></li><li><a href="/W2024/modules/browser-js/week12/observers/" class="sidebar-link">12.1: Observers &amp; Classes</a></li><li><a href="/W2024/modules/browser-js/week12/destructure/" class="sidebar-link">12.2: Destructuring, Spead, &amp; Enumeration</a></li><li><a href="/W2024/modules/browser-js/week13/storage/" class="sidebar-link">13.1: HTML5 APIs</a></li><li><a href="/W2024/modules/browser-js/week13/multi-page/" aria-current="page" class="active sidebar-link">13.2: Multi-Page, SPA, and JAMStack </a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/W2024/modules/browser-js/week13/multi-page/#multi-page-scripts" class="sidebar-link">Multi-Page Scripts</a></li><li class="sidebar-sub-header"><a href="/W2024/modules/browser-js/week13/multi-page/#spa" class="sidebar-link">SPA</a></li><li class="sidebar-sub-header"><a href="/W2024/modules/browser-js/week13/multi-page/#jamstack" class="sidebar-link">JAMStack</a></li><li class="sidebar-sub-header"><a href="/W2024/modules/browser-js/week13/multi-page/#server-side-programming-servers-hosting-databases" class="sidebar-link">Server-Side Programming, Servers, Hosting &amp; Databases</a></li><li class="sidebar-sub-header"><a href="/W2024/modules/browser-js/week13/multi-page/#window-open" class="sidebar-link">Window.open()</a></li><li class="sidebar-sub-header"><a href="/W2024/modules/browser-js/week13/multi-page/#window-loading-and-unloading" class="sidebar-link">Window Loading and Unloading</a></li><li class="sidebar-sub-header"><a href="/W2024/modules/browser-js/week13/multi-page/#what-to-do-this-week" class="sidebar-link">What to do this week</a></li></ul></li><li><a href="/W2024/modules/browser-js/week14/project-1/" class="sidebar-link">14.1: Forms &amp; Page Transitions</a></li><li><a href="/W2024/modules/browser-js/week14/project-2/" class="sidebar-link">14.2: Final Project</a></li><li><a href="/W2024/modules/browser-js/week15/" class="sidebar-link">15.1: Final Project</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Hybrid Content</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><header><div class="section-title blue">
    Web Apps
  </div> <h1>13.2 SPA and JAM Stack</h1></header> <h2 id="multi-page-scripts"><a href="#multi-page-scripts" class="header-anchor">#</a> Multi-Page Scripts</h2> <p>When building websites that are made up of multiple HTML files, you must bear in mind that, every time the browser loads a webpage it is replacing an old one. When the new page loads, it will be parsed by the browser and it will load any attached JS files, CSS files, fonts, and images.</p> <p>It is likely that these other files will be in the browser's cache (not to be confused with the Cache API which is controlled by the developer). However, to run, they still need to be loaded into memory.</p> <p>Any variables and functions that you had in your old JS file are being recreated.</p> <p>Any values that were in your old variables <strong>ARE GONE</strong>.</p> <p>This is why we need to use that <code>DOMContentLoaded</code> event to call an <code>init</code> method inside our namespace object. We need to run through the setup and add event listeners on every page load.</p> <p>So, how does our script know which page has been loaded?</p> <h3 id="page-specific-code"><a href="#page-specific-code" class="header-anchor">#</a> Page Specific Code</h3> <p>There are many ways that you can figure out which page just loaded our script. You can look at the <code>location</code> object to get the URL. But the simplest way to do it is to add a unique <code>id</code> attribute to your <code>&lt;body&gt;</code> element in each of your webpages.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Then you can use that in your code as the identifier for each page.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">APP</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//any page has loaded</span>
    <span class="token constant">APP</span><span class="token punctuation">.</span><span class="token function">addListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">APP</span><span class="token punctuation">.</span><span class="token function">pageSpecific</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">pageSpecific</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//run code that is specific to each page</span>
    <span class="token keyword">let</span> id <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>id<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">//page is missing an id</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">'home'</span><span class="token operator">:</span>
        <span class="token comment">//on the home page</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'other'</span><span class="token operator">:</span>
        <span class="token comment">//some other page</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'contact'</span><span class="token operator">:</span>
        <span class="token comment">//on the contact page</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token comment">//page that we don't recognize the id</span>
      <span class="token comment">//or page with no specific code needed</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">addListeners</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//load any event listeners that are common to all pages</span>
    <span class="token comment">//like hashchange, popstate, main nav clicks, etc</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="css-and-style-implications"><a href="#css-and-style-implications" class="header-anchor">#</a> CSS and Style Implications</h3> <p>If you are adding unique ids to each page's <code>&lt;body&gt;</code> tag then you can leverage that in your CSS.</p> <p>A common use is to style current links or hide and show page specific elements.</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">#home .sidebar</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token comment">/* on the home page hide the sidebar */</span>
<span class="token punctuation">}</span>
<span class="token selector">#products .footer</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100vw<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 6rem<span class="token punctuation">;</span>
  <span class="token comment">/* make the footer fixed on the products page */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="spa"><a href="#spa" class="header-anchor">#</a> SPA</h2> <p>A <code>Single Page Application (SPA)</code> is what the name implies. A single HTML file that gets loaded to the browser and then the JavaScript is the Application logic responsible for showing and hiding and loading new content. We can use the <code>History API</code> to manage the location bar and history array. We use the <code>Fetch API</code> to get new content from the server. We can use the <code>Cache API</code> and the <code>Web Storage API</code> to save items, like images or JSON files, loaded from the server, which will improve performance in your app.</p> <h2 id="jamstack"><a href="#jamstack" class="header-anchor">#</a> JAMStack</h2> <p>The <code>JAM</code> in <code>JAMStack</code> refers to JavaScript, APIs, and Markup. Basically what we have been doing since week 5. A <code>JAMStack</code> application can be a <code>SPA</code> or it can be a multi-page web app. It uses all the same HTML5 APIs as a SPA site - <code>history api</code>, <code>fetch api</code>, <code>cache api</code>, <code>web storage api</code> and more.</p> <p>The defining feature of a <code>JAMStack</code> site is that all the files used to make the site are static ones. There is no server-side programming required, with the exception of the APIs. Generally, the APIs are built independently from the website. They can be hosted elsewhere and use any kind of server-side programming language.</p> <p>You can even use <code>Github Pages</code> to host and run a JAMStack website. The dynamic content will come from one or more APIs and be fed into your static website using client-side JavaScript.</p> <h2 id="server-side-programming-servers-hosting-databases"><a href="#server-side-programming-servers-hosting-databases" class="header-anchor">#</a> Server-Side Programming, Servers, Hosting &amp; Databases</h2> <p>There are so many different programming languages in use today that it is virtually impossible to keep up with all of them. There are also many different kinds of web servers. Some webservers are able to support multiple programming languages, some support only one. On top of all that there are tons of options for different types of databases.</p> <p>There are many kinds of hosting choices available to you and the one that you pick will be directly connected to which programming language and which kind of database you want to use.</p> <h3 id="languages"><a href="#languages" class="header-anchor">#</a> Languages</h3> <p>Here are a few of the server-side programming languages that you could use to build websites.</p> <ul><li>NodeJS</li> <li>PHP</li> <li>Ruby</li> <li>ASP.Net C#</li> <li>Python</li> <li>Java J2EE</li></ul> <p>Most of those come with a variety of frameworks that can be used with the language to make development faster.</p> <p>Next semester we will be leveraging your knowledge of JavaScript to create websites and APIs with <code>NodeJS</code>.</p> <h3 id="databases"><a href="#databases" class="header-anchor">#</a> Databases</h3> <p>There are different types of Databases, each with its own strengths and weaknesses. Here are the main categories with a few examples, in brackets, of their implementations.</p> <ul><li>Text Files (<code>txt</code>, <code>csv</code>, <code>xlsx</code>)</li> <li>Relational Databases (<code>MySQL</code>, <code>MariaDB</code>, <code>PostgreSQL</code>, <code>SQL Server</code>, <code>Oracle</code>)</li> <li>Document Databases (<code>MongoDB</code>, <code>DynamoDB</code>, <code>DocumentDB</code>)</li> <li>Graph Databases (<code>Neo4j</code>)</li> <li>Hierarchical Databases</li></ul> <p>Each type has its own learning curve and mental models that you need to figure out.</p> <p>In our program we will be focused on Document Databases but will give you a brief introduction to Relational Databases too.</p> <p>The database is where you save the data that you want to save with multiple users. It is where APIs get the information that they are sharing with webpages.</p> <h2 id="window-open"><a href="#window-open" class="header-anchor">#</a> Window.open()</h2> <p>If you ever need to open a new window or tab from JavaScript, you can do this with the <code>window.open()</code> method. The decision to open a new tab or window depends on the settings in the user's browser. It is not something we can control with JS. There is also a <code>window.close()</code> method.</p> <p>When you use JavaScript to open a new window/tab you will be returned a reference to the newly created <code>window</code> object. This means that you can control what is happening in the page that you opened from the creating page script.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">'https://www.mydomain.com'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> features <span class="token operator">=</span>
  <span class="token string">'menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=no'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> winRef <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> features<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>The features parameter controls which elements will be visible if you are opening a new window.</p> <p>If the domain for the page that you are opening is the same as the domain for the page that is running your script, then you will have full control over it. If the domain is different then there will be some security limitations to what you can control.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//to close the a window or tab that was opened by JS from within that page</span>
window<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//to close the newly opened window from the script that opened it</span>
winRef<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//winRef is the variable created in the script above</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div title="window tab iframe open" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/cmA-IyD8_BA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <h2 id="window-loading-and-unloading"><a href="#window-loading-and-unloading" class="header-anchor">#</a> Window Loading and Unloading</h2> <p>When you are loading and unloading pages there are a series of event that take place. They will always take place in the same order.</p> <p>This concept applies to many of the events that you use in your code. A single user action results in a cascade of events. A user taps on the<code>A</code> key on their keyboard -&gt; at the very least there will be a <code>keydown</code>, <code>keyup</code>, and <code>keypress</code> event sequence. However, depending on what element had focus there could also be an <code>input</code> event or a <code>propertychange</code> event. These events all have a predefined sequence that they have to follow.</p> <p>When a page is loading these are the events that could be triggered in the order that they would occur.</p> <ol><li><code>window.readystatechange</code></li> <li><code>window.DOMContentLoaded</code></li> <li><code>window.load</code></li> <li><code>window.pageshow</code></li> <li><code>window.popstate</code></li> <li><code>window.hashchange</code></li></ol> <p>When the user clicks on a link to navigate away from the page, these are the events that will be triggered, in the order that they will occur.</p> <ol><li><code>element.mousedown</code></li> <li><code>element.focus</code></li> <li><code>element.mouseup</code></li> <li><code>element.click</code></li> <li><code>window.pagehide</code></li> <li><code>window.beforeunload</code></li> <li><code>window.unload</code></li></ol> <p>And, if a page loses focus by a user switching tabs or applications.</p> <ul><li><code>window.visibilitychange</code></li></ul> <p>If you switch away from a page by moving to another tab or, on a mobile device, opening another app, then you will trigger the <code>window.visibilitychange</code> event. Switching back to the tab will also trigger the <code>visibilitychange</code> event. The <code>pagehide</code> event will not be triggered by leaving the tab or opening another app. The <code>beforeunload</code> and <code>unload</code> events are not as reliable for running code. Usually, by the time those events happen the process of leaving is already underway. If you want to send a <code>fetch()</code> call to upload recent data then the <code>pagehide</code> or <code>beforeunload</code> can be used. The <code>unload</code> event cannot be used for <code>fetch</code> because the page will be gone before the message is sent. Even with <code>beforeunload</code> you can send data but you will not receive a result before the page is unloaded.</p> <p>Something that might be of use to you at some point is the <code>persisted</code> property, of the <code>pageshow</code> and <code>pagehide</code> events, which has a boolean value indicating whether or not the page was loaded from the browser cache.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pageshow'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ev<span class="token punctuation">.</span>persisted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//page was loaded from browser cache</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">//page was NOT loaded from browser cache</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>This might be useful if you decide you want to check for new versions of files or use your own files from the <code>Cache API</code>.</p> <h2 id="what-to-do-this-week"><a href="#what-to-do-this-week" class="header-anchor">#</a> What to do this week</h2> <div class="custom-block warning"><p class="custom-block-title">TODO</p> <p>Things to do before next week.</p> <ul><li>Read all the content from <code>Modules 13.1, 13.2, and 14.1</code>.</li></ul></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/31/2023, 8:15:38 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/W2024/modules/browser-js/week13/storage/" class="prev">
        13.1: HTML5 APIs
      </a></span> <span class="next"><a href="/W2024/modules/browser-js/week14/project-1/">
        14.1: Forms &amp; Page Transitions
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/W2024/assets/js/app.66be6d0a.js" defer></script><script src="/W2024/assets/js/2.2dde8ef8.js" defer></script><script src="/W2024/assets/js/1.5dccc02f.js" defer></script><script src="/W2024/assets/js/42.10b4b851.js" defer></script><script src="/W2024/assets/js/21.a0811bd6.js" defer></script><script src="/W2024/assets/js/23.6f106e0b.js" defer></script>
  </body>
</html>
