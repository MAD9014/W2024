<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>14.1 Forms and Page Transitions | MAD9014</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Cross-Platform Web Development">
    
    <link rel="preload" href="/W2024/assets/css/0.styles.45320be6.css" as="style"><link rel="preload" href="/W2024/assets/js/app.66be6d0a.js" as="script"><link rel="preload" href="/W2024/assets/js/2.2dde8ef8.js" as="script"><link rel="preload" href="/W2024/assets/js/1.5dccc02f.js" as="script"><link rel="preload" href="/W2024/assets/js/44.c4cffa3b.js" as="script"><link rel="preload" href="/W2024/assets/js/21.a0811bd6.js" as="script"><link rel="preload" href="/W2024/assets/js/23.6f106e0b.js" as="script"><link rel="prefetch" href="/W2024/assets/js/10.1a94ffdf.js"><link rel="prefetch" href="/W2024/assets/js/11.444a63bc.js"><link rel="prefetch" href="/W2024/assets/js/12.dfc01b57.js"><link rel="prefetch" href="/W2024/assets/js/13.dac8e333.js"><link rel="prefetch" href="/W2024/assets/js/14.4f6e8388.js"><link rel="prefetch" href="/W2024/assets/js/15.f5bf1111.js"><link rel="prefetch" href="/W2024/assets/js/16.6a92d24e.js"><link rel="prefetch" href="/W2024/assets/js/17.9e61cdfb.js"><link rel="prefetch" href="/W2024/assets/js/18.87da4873.js"><link rel="prefetch" href="/W2024/assets/js/19.1c58f94e.js"><link rel="prefetch" href="/W2024/assets/js/20.6c52a85d.js"><link rel="prefetch" href="/W2024/assets/js/22.46ecc00a.js"><link rel="prefetch" href="/W2024/assets/js/24.37afaa69.js"><link rel="prefetch" href="/W2024/assets/js/25.52cfe7fa.js"><link rel="prefetch" href="/W2024/assets/js/26.df771b4b.js"><link rel="prefetch" href="/W2024/assets/js/27.173d5de9.js"><link rel="prefetch" href="/W2024/assets/js/28.06e857bb.js"><link rel="prefetch" href="/W2024/assets/js/29.0834c8d2.js"><link rel="prefetch" href="/W2024/assets/js/3.3a3f47d0.js"><link rel="prefetch" href="/W2024/assets/js/30.3d8107be.js"><link rel="prefetch" href="/W2024/assets/js/31.d219f188.js"><link rel="prefetch" href="/W2024/assets/js/32.eca59acd.js"><link rel="prefetch" href="/W2024/assets/js/33.721adc44.js"><link rel="prefetch" href="/W2024/assets/js/34.ff0df110.js"><link rel="prefetch" href="/W2024/assets/js/35.7a0d58a0.js"><link rel="prefetch" href="/W2024/assets/js/36.4035590c.js"><link rel="prefetch" href="/W2024/assets/js/37.ade24e63.js"><link rel="prefetch" href="/W2024/assets/js/38.fdd2fbf1.js"><link rel="prefetch" href="/W2024/assets/js/39.0af27504.js"><link rel="prefetch" href="/W2024/assets/js/4.b85af2cd.js"><link rel="prefetch" href="/W2024/assets/js/40.bf654ac6.js"><link rel="prefetch" href="/W2024/assets/js/41.9fb7dc69.js"><link rel="prefetch" href="/W2024/assets/js/42.10b4b851.js"><link rel="prefetch" href="/W2024/assets/js/43.ddf9517f.js"><link rel="prefetch" href="/W2024/assets/js/45.2467b08e.js"><link rel="prefetch" href="/W2024/assets/js/46.59baae9f.js"><link rel="prefetch" href="/W2024/assets/js/47.aea6a80d.js"><link rel="prefetch" href="/W2024/assets/js/48.4f184429.js"><link rel="prefetch" href="/W2024/assets/js/49.ee4c566b.js"><link rel="prefetch" href="/W2024/assets/js/5.ea05b443.js"><link rel="prefetch" href="/W2024/assets/js/50.a416c609.js"><link rel="prefetch" href="/W2024/assets/js/51.970a1c48.js"><link rel="prefetch" href="/W2024/assets/js/52.fd423478.js"><link rel="prefetch" href="/W2024/assets/js/53.f304801c.js"><link rel="prefetch" href="/W2024/assets/js/54.65c615e2.js"><link rel="prefetch" href="/W2024/assets/js/55.0c7bdb4b.js"><link rel="prefetch" href="/W2024/assets/js/56.c09c6314.js"><link rel="prefetch" href="/W2024/assets/js/57.bd1f28af.js"><link rel="prefetch" href="/W2024/assets/js/58.1906c7ed.js"><link rel="prefetch" href="/W2024/assets/js/59.d527f78b.js"><link rel="prefetch" href="/W2024/assets/js/6.0f9407d8.js"><link rel="prefetch" href="/W2024/assets/js/60.73e7147c.js"><link rel="prefetch" href="/W2024/assets/js/61.18eecfc4.js"><link rel="prefetch" href="/W2024/assets/js/62.78b8aad3.js"><link rel="prefetch" href="/W2024/assets/js/63.8711c3d9.js"><link rel="prefetch" href="/W2024/assets/js/64.32bc00ab.js"><link rel="prefetch" href="/W2024/assets/js/7.58d95412.js"><link rel="prefetch" href="/W2024/assets/js/vendors~docsearch.9e606068.js">
    <link rel="stylesheet" href="/W2024/assets/css/0.styles.45320be6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/W2024/" class="home-link router-link-active"><img src="/W2024/mad-d-logo-sm.png" alt="MAD9014" class="logo"> <span class="site-name can-hide">MAD9014</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/W2024/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/W2024/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/W2024/conventions/" class="nav-link">
  Conventions
</a></div><div class="nav-item"><a href="/W2024/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/W2024/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/W2024/assignments/" class="nav-link">
  Deliverables
</a></div><div class="nav-item"><a href="/W2024/conventions/" class="nav-link">
  Conventions
</a></div><div class="nav-item"><a href="/W2024/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Core JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Browser JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/W2024/modules/browser-js/week5/dom-1/" class="sidebar-link">5.1: Document Object Model</a></li><li><a href="/W2024/modules/browser-js/week5/dom-2/" class="sidebar-link">5.2: Document Object Model</a></li><li><a href="/W2024/modules/browser-js/week6/events/" class="sidebar-link">6.1: Handling Events</a></li><li><a href="/W2024/modules/browser-js/week7/project-structure/" class="sidebar-link">7.1: Project Structure</a></li><li><a href="/W2024/modules/browser-js/week7/code-structure/" class="sidebar-link">7.2: Code Structure</a></li><li><a href="/W2024/modules/browser-js/week9/promises/" class="sidebar-link">9.1: Promises</a></li><li><a href="/W2024/modules/browser-js/week9/async/" class="sidebar-link">9.2: Asynchronous Programming</a></li><li><a href="/W2024/modules/browser-js/week10/ajax/" class="sidebar-link">10.1: AJAX and Fetch</a></li><li><a href="/W2024/modules/browser-js/week10/fetch-apis/" class="sidebar-link">10.2: Fetch and APIs</a></li><li><a href="/W2024/modules/browser-js/week11/fetch-data/" class="sidebar-link">11.1: Dynamic Data</a></li><li><a href="/W2024/modules/browser-js/week11/security/" class="sidebar-link">11.2: Fetch Security</a></li><li><a href="/W2024/modules/browser-js/week12/observers/" class="sidebar-link">12.1: Observers &amp; Classes</a></li><li><a href="/W2024/modules/browser-js/week12/destructure/" class="sidebar-link">12.2: Destructuring, Spead, &amp; Enumeration</a></li><li><a href="/W2024/modules/browser-js/week13/storage/" class="sidebar-link">13.1: HTML5 APIs</a></li><li><a href="/W2024/modules/browser-js/week13/multi-page/" class="sidebar-link">13.2: Multi-Page, SPA, and JAMStack </a></li><li><a href="/W2024/modules/browser-js/week14/project-1/" aria-current="page" class="active sidebar-link">14.1: Forms &amp; Page Transitions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/W2024/modules/browser-js/week14/project-1/#working-with-forms" class="sidebar-link">Working with Forms</a></li><li class="sidebar-sub-header"><a href="/W2024/modules/browser-js/week14/project-1/#dispatching-events" class="sidebar-link">Dispatching Events</a></li><li class="sidebar-sub-header"><a href="/W2024/modules/browser-js/week14/project-1/#view-transition-api" class="sidebar-link">View Transition API</a></li><li class="sidebar-sub-header"><a href="/W2024/modules/browser-js/week14/project-1/#what-to-do-this-week" class="sidebar-link">What to do this week</a></li></ul></li><li><a href="/W2024/modules/browser-js/week14/project-2/" class="sidebar-link">14.2: Final Project</a></li><li><a href="/W2024/modules/browser-js/week15/" class="sidebar-link">15.1: Final Project</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Hybrid Content</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><header><div class="section-title blue">
    Web Apps
  </div> <h1>14.1 Forms and Page Transitions</h1></header> <h2 id="working-with-forms"><a href="#working-with-forms" class="header-anchor">#</a> Working with Forms</h2> <p>In your Web Design Course you have learned how to create forms with HTML and style them with CSS. We have talked about JSON and FormData objects in this course. FormData objects are a JavaScript
representation of what you would be sending to the webserver if you submitted the HTML form, without JS.</p> <p>A quick way to create a JavaScript <code>FormData</code> object from a form is to pass a reference to the form to the <code>FormData</code> constructor.</p> <div title="Effective use of FormData" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/GWJhE7Licjs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <div class="custom-block tip"><p class="custom-block-title">Remember</p> <p>All <code>values</code> that come from any web form are going to be strings. It doesn't matter if the value is numeric or a boolean. If you are using a <code>value</code> property then you get a String. If you need a
number then you have to do the conversion with <code>Number()</code> or <code>parseInt()</code> or <code>parseFloat()</code>.</p></div> <p>Here is an overview of how to interact with HTML forms using JavaScript. It includes discussions on submitting and resetting forms, checkboxes and radio buttons, the <code>input</code> and <code>change</code> and <code>select</code>
events, and more.</p> <div title="HTML Forms and JavaScript" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/ikR9DsGMUMc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p>A <code>select</code> element will have a <code>value</code> property as well as a <code>selectedIndex</code> property. The <code>value</code> is the value of the <code>&lt;option&gt;</code> picked by the user. The <code>selectedIndex</code> is the numeric index of the
chosen <code>&lt;option&gt;</code> element inside the <code>select</code>.</p> <div title="working with Select, options, optgroup" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/s0c36oh8I-I" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p>If you would rather or need to work with <code>JSON</code> instead of a <code>FormData</code> object, this video talks about building a JavaScript Object from the data in your form.</p> <p>Once you have a JS object you can then call <code>JSON.stringify()</code> on that object to convert it to a <code>JSON</code> string that can be uploaded with a <code>fetch</code> call.</p> <div title="Put JS form values into JS Objects" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/NxVCq4p0Kb0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p>See the notes in <a href="/W2024/modules/browser-js/week11/fetch-data/#uploading-data-with-fetch">Module 11.2</a> for more details on uploading data with <code>fetch</code>.</p> <p>Here is a refresher on <code>Keyboard</code> Events.</p> <div title="Keyboard Events" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/5-koI06rmcA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p>A quick video talking about how you can properly test for an empty input field.</p> <div title="Testing for Empty fields" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/KR9Vj67Qfz8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p>These next two videos explain modern web form validation in depth and in detail.</p> <div title="Form Validation part I" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/hAqglX3Jm7Y" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <div title="Form Validation part 2" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/hAqglX3Jm7Y" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p>And finally, how to enable and disable autocomplete features in web forms.</p> <div title="Helping Users with Autocomplete" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/D9JHizCAx8U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <p><a href="https://developer.mozilla.org/en-US/docs/Learn/Forms" target="_blank" rel="noopener noreferrer">MDN Guide to Web Forms<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="dispatching-events"><a href="#dispatching-events" class="header-anchor">#</a> Dispatching Events</h2> <p>We have discussed and used many events. Did you know that some events also have matching methods that you can call?</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//submit a form</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#myForm'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//reset a form</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#myForm'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//click a link</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'a.someLink'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Not all events have a matching method and not all elements are able to run the methods.</p> <p>There is also a way that you <code>dispatch</code> and event. Basically, you can make an element think that an event has happened to it. And if that element has an event listener then it will be triggered. The
syntax to do this is actually very simple. It is a method that you can call on any DOM Element to dispatch the event. You just need to create an <code>Event</code> object to pass to the method.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>someElement<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>someEventObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The <code>Event</code> object will have a <code>type</code> property that indicates which type of event is happening to the referenced element.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//target the 3rd li in the sidebar</span>
<span class="token keyword">let</span> someElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.sideNav li'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
someElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//this will run when our event gets dispatched</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I was just clicked... I think.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//create a click event</span>
<span class="token keyword">let</span> ev <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">bubbles</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">cancelable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">composed</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//the options object is optional. This one shows the default values for all the properties</span>

<span class="token comment">//now make the click happen to the &lt;li&gt;</span>
someElement<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div title="creating and dispatching custom events" class="video-player"><iframe width="560" height="315" src="https://www.youtube.com/embed/k5TSidZEH5s" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></div> <h3 id="custom-events"><a href="#custom-events" class="header-anchor">#</a> Custom Events</h3> <p>What is a custom event? It is an event that does not already exist in the DOM or other HTML5 APIs. You might want an event that fires on your <code>document</code> object telling you that the next set of items
have been fetched from an API. Maybe you aren't adding data to the screen as soon as it comes back from the server, but you want the <code>document</code> object to know that data is ready to be loaded. Maybe
you want to create custom events that fire during css animations or transitions. Whatever the event, you can create it. You really just create an <code>Event</code> and give it a name.</p> <p>As long as your object is able to call <code>addEventListener</code> then it can know that the event was triggered.</p> <p>There are a few ways that you can create your own custom events too. Here are the first two.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//create a basic event with a name</span>
<span class="token keyword">let</span> ev1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">'beerOpened'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//create a custom event that can contain data that will be part of the event object</span>
<span class="token keyword">let</span> ev2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomEvent</span><span class="token punctuation">(</span><span class="token string">'beerOpened'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">detail</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">today</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">brand</span><span class="token operator">:</span> <span class="token string">'Corona'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>If you use the <code>CustomEvent</code> constructor, the second parameter is an object that must have a <code>detail</code> property. The detail property can contain whatever you want. This is the custom data that will be
available through the event when <code>addEventListener</code> calls the listener function.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'main p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'beerOpened'</span><span class="token punctuation">,</span> displayBeer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//listen for the string name (type) of the event</span>
p<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>ev2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//use the event object to dispatch, not the string type name of the event</span>

<span class="token keyword">function</span> <span class="token function">displayBeer</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> span <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  span<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">A </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ev<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>brand<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> was opened at </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ev<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>today<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  p<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>span<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>All the properties inside the <code>Event</code> must be put inside <code>detail</code>.</p> <h3 id="custom-events-with-class-syntax"><a href="#custom-events-with-class-syntax" class="header-anchor">#</a> Custom Events with Class Syntax</h3> <p>Another way of creating a custom event is to use the <code>class</code> syntax and <code>extend</code> the base Error object.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">ScreamEvent</span> <span class="token keyword">extends</span> <span class="token class-name">Event</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">prop</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">'scream'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//create a basic Event object that sets the type as 'scream'</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>detail <span class="token operator">=</span> prop<span class="token punctuation">;</span> <span class="token comment">//create a custom property for our Event</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>And then we can add our <code>ScreamEvent</code> to objects that have the <code>addEventListener</code> method.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//create a ScreamEvent</span>
<span class="token keyword">let</span> sev <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ScreamEvent</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'hi'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//add a listener for the ScreamEvent on the document object</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scream'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'screamed'</span><span class="token punctuation">,</span> ev<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//dispatch the ScreamEvent</span>
document<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>sev<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="view-transition-api"><a href="#view-transition-api" class="header-anchor">#</a> View Transition API</h2> <p>The new View Transition API is currently supported in Chrome, Edge, and Opera. Hopefully, in the near future Firefox and Safari will also start to support it too. In the meantime, you can use these as
a progressive enhancement.</p> <p>The initial version of the API works only on View Transitions between states on the current page. In other words, this is intended to be used for Single Page Applications. As the user clicks on
buttons and links and your script changes what is being displayed on the page, this API will be able to create transitions between the starting and ending state of the page.</p> <div class="custom-block tip"><p class="custom-block-title">Future Versions</p> <p>Later versions of the API are slated to include the ability to create transitions between different pages.</p></div> <h3 id="checking-for-feature-support"><a href="#checking-for-feature-support" class="header-anchor">#</a> Checking for Feature Support</h3> <p>Whenever you use something as a progressive enhancement you need to test for browser support first. Call a function that will start the process of updating the interface of your SPA. Check if the
browser supports the method <code>document.startViewTransition</code>. Whether it does or not you will end up calling your function to make the actual changes to the DOM.</p> <p>If the browser does support the <code>startViewTransition</code> method then you call that and pass it your function for updating the DOM.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">doSomeNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// check for support for the startViewTransition method</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>document<span class="token punctuation">.</span>startViewTransition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//this code runs for browsers that do NOT support it yet</span>
    <span class="token comment">//call your method that will make changes to the page</span>
    <span class="token function">updateTheDOMSomehow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//exit the function if there was no support</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// With a transition:</span>
  document<span class="token punctuation">.</span><span class="token function">startViewTransition</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">updateTheDOMSomehow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>What the <code>startViewTransition</code> method does is take a snapshot of the page just before your DOM update function is called. It monitors all the changes that would be made by your method and then creates
the visual transition between the starting state and the ending state.</p> <h3 id="css-pseudo-elements"><a href="#css-pseudo-elements" class="header-anchor">#</a> CSS Pseudo Elements</h3> <p>To help with the visual changes, in addition to the snapshot, the <code>startViewTransition</code> method will create the following pseudo-elements.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>::view-transition
└─ ::view-transition-group(root)
   └─ ::view-transition-image-pair(root)
      ├─ ::view-transition-old(root)
      └─ ::view-transition-new(root)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>The <code>::view-transition</code> sits in an overlay, over everything else on the page. This is useful if you want to set a background color for the transition.</p> <p><code>::view-transition-old(root)</code> is a screenshot of the old view, and <code>::view-transition-new(root)</code> is a live representation of the new view. Both render as CSS 'replaced content' (like an <code>&lt;img&gt;</code>
element).</p> <p>The old view animates by default from <code>opacity: 1</code> to <code>opacity: 0</code>, while the new view animates from <code>opacity: 0</code> to <code>opacity: 1</code>, creating a cross-fade. All of the animation is performed using CSS
animations, so they can be customized with CSS.</p> <p>You can use the pseudo classes in your own CSS file to control the transition from the old state to the new state. See below for an example.</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@keyframes</span> fade-in</span> <span class="token punctuation">{</span>
  <span class="token selector">from</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@keyframes</span> fade-out</span> <span class="token punctuation">{</span>
  <span class="token selector">to</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@keyframes</span> slide-from-right</span> <span class="token punctuation">{</span>
  <span class="token selector">from</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>30px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@keyframes</span> slide-to-left</span> <span class="token punctuation">{</span>
  <span class="token selector">to</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-30px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">::view-transition-old(root)</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> 90ms linear both fade-out<span class="token punctuation">,</span> 300ms linear both slide-to-left<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">::view-transition-new(root)</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> 210ms linear 90ms both fade-in<span class="token punctuation">,</span> 300ms linear both slide-from-right<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="transitioning-multiple-elements"><a href="#transitioning-multiple-elements" class="header-anchor">#</a> Transitioning Multiple Elements</h3> <p>If you want to animate different parts of the interface with different transitions then we can add a <code>view-transition-name</code> property for each DOM area that will be animated. Each part needs to have a
unique name.</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.masthead</span> <span class="token punctuation">{</span>
  <span class="token property">view-transition-name</span><span class="token punctuation">:</span> heading<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.content</span> <span class="token punctuation">{</span>
  <span class="token property">view-transition-name</span><span class="token punctuation">:</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>This will create a pseudo element tree for the DOM like this.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>::view-transition
├─ ::view-transition-group(root)
│  └─ ::view-transition-image-pair(root)
│     ├─ ::view-transition-old(root)
│     └─ ::view-transition-new(root)
└─ ::view-transition-group(heading)
│  └─ ::view-transition-image-pair(heading)
│     ├─ ::view-transition-old(heading)
│     └─ ::view-transition-new(heading)
└─::view-transition-group(content)
   └─ ::view-transition-image-pair(content)
      ├─ ::view-transition-old(content)
      └─ ::view-transition-new(content)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>The <code>heading</code> and <code>content</code> <code>view-transition-name</code> values will target specific parts of the page. And the <code>::view-transition-image-pair(root)</code> will cover everything else on the page outside of the two
named areas.</p> <p>The names can also be added through JavaScript, if needed.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> header <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.heading'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
header<span class="token punctuation">.</span>style<span class="token punctuation">.</span>viewTransitionName <span class="token operator">=</span> <span class="token string">'heading'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="asynchronous-transitions"><a href="#asynchronous-transitions" class="header-anchor">#</a> Asynchronous Transitions</h3> <p>There will sometimes be transitions where you have an element that exists on the screen in one state but not in the other. Sometimes the element will only exist on the new state and sometimes only on
the old state.</p> <p>To handle situations like this we can add the <code>::only-child</code> pseudo-class to the element. This will target the element when it only exists in one of the two states in the pair.</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">::view-transition-new(heading):only-child</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> 300ms linear both fade-in<span class="token punctuation">;</span> <span class="token comment">/* entry transition */</span>
<span class="token punctuation">}</span>
<span class="token selector">::view-transition-old(heading):only-child</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> 300ms linear both fade-out<span class="token punctuation">;</span> <span class="token comment">/* exit transition */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="javascript-control"><a href="#javascript-control" class="header-anchor">#</a> JavaScript Control</h3> <p>So, moving beyond the CSS part, there are a few JavaScript Promise-based properties which resolve and a method that can be accessed on the <code>ViewTransition</code> object created by calling the
<code>startViewTransition</code> method.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>document<span class="token punctuation">.</span>startViewTransition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">updateTheDOM</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> viewTransition <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">startViewTransition</span><span class="token punctuation">(</span>updateTheDOM<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//viewTransition.ready.then()</span>
  <span class="token comment">//viewTransition.finished.then()</span>
  <span class="token comment">//viewTransition.updateCallbackDone.then()</span>
  <span class="token comment">//viewTransition.skipTransition()</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>The <code>viewTransition.updateCallbackDone</code> Promise resolves when the function called by <code>startViewTransition()</code> is complete and its Promise resolves and creates the <code>viewTransition</code> object.</p> <p>The <code>viewTransition.ready</code> Promise resolves after <code>startViewTransition</code> has taken the snapshot and finished building the pseudo-element tree for the transition.</p> <p>The <code>viewTransition.finished</code> Promise resolves when the transitions created by the call to <code>updateTheDOM</code> has completed.</p> <p>The <code>viewTransition.skipTransition()</code> method, if called, will skip over any transition animations that are referenced by the pseudo-element styles - <code>::view-transition-new()</code>,
<code>::view-transition-old()</code>, and <code>::view-transition-group()</code>. The <code>updateTheDOM</code> method still gets called and changes are still made to the DOM. It's just those transitions that are skipped.</p> <h2 id="what-to-do-this-week"><a href="#what-to-do-this-week" class="header-anchor">#</a> What to do this week</h2> <div class="custom-block warning"><p class="custom-block-title">TODO Things to do before next week.</p> <ul><li>Read all the content from <code>Modules 14.1, 14.2</code>.</li> <li>Work on Final Project</li></ul></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/11/2023, 2:31:24 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/W2024/modules/browser-js/week13/multi-page/" class="prev">
        13.2: Multi-Page, SPA, and JAMStack 
      </a></span> <span class="next"><a href="/W2024/modules/browser-js/week14/project-2/">
        14.2: Final Project
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/W2024/assets/js/app.66be6d0a.js" defer></script><script src="/W2024/assets/js/2.2dde8ef8.js" defer></script><script src="/W2024/assets/js/1.5dccc02f.js" defer></script><script src="/W2024/assets/js/44.c4cffa3b.js" defer></script><script src="/W2024/assets/js/21.a0811bd6.js" defer></script><script src="/W2024/assets/js/23.6f106e0b.js" defer></script>
  </body>
</html>
